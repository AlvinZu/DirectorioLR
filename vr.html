<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>DirectorioPro VR Experience</title>
    <meta name="description" content="Experiencia inmersiva de DirectorioPro Los Reyes">
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-particle-system-component@1.1.3/dist/aframe-particle-system-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000;
        }
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a1a, #000);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 1s ease;
        }
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #4CAF50;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        .loading-text {
            color: #fff;
            font-size: 18px;
            font-weight: 500;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .instructions {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            text-align: center;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            z-index: 10;
            width: 80%;
            max-width: 500px;
        }
        .ios-instructions {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #4CAF50;
            text-align: center;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 15px;
            font-size: 16px;
            z-index: 10;
            width: 90%;
            max-width: 500px;
            display: none;
            border: 2px solid #4CAF50;
        }
        .title-overlay {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(76, 175, 80, 0.7);
            z-index: 10;
            width: 90%;
        }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loading">
        <div class="loading-spinner"></div>
        <div class="loading-text">Iniciando experiencia inmersiva...</div>
    </div>

    <div class="ios-instructions" id="iosInstructions">
        <strong>Instrucciones para iPhone:</strong><br>
        1. Toca el botÃ³n Compartir (ðŸ“¤) en la barra de menÃº<br>
        2. Selecciona "Agregar a Inicio"<br>
        3. Toca "Agregar" en la esquina superior derecha
    </div>

    <div class="title-overlay" id="sceneTitle">Â¡Bienvenido al Futuro de DirectorioPro!</div>

    <a-scene background="color: #1a1a1a" loading-screen="enabled: false" cursor="rayOrigin: mouse">
        <a-assets>
            <img id="logo" src="icon-512x512.png">
            <img id="instrucciones" src="instrucciones-vr.png">
            <img id="feature1" src="feature1.png">
            <img id="feature2" src="feature2.png">
            <img id="feature3" src="feature3.png">
            <audio id="hover-sound" src="https://cdn.aframe.io/360-image-gallery-boilerplate/audio/hover.ogg"></audio>
            <audio id="click-sound" src="https://cdn.aframe.io/360-image-gallery-boilerplate/audio/click.ogg"></audio>
        </a-assets>

        <!-- Sistema estelar de fondo -->
        <a-entity particle-system="preset: star; color: #FFFFFF; particleCount: 5000"></a-entity>
        <a-entity particle-system="preset: star; color: #4CAF50; particleCount: 1000; size: 0.5; position: 0 -5 0"></a-entity>

        <!-- Planeta central con logo -->
        <a-entity id="mainPlanet" position="0 0 -10">
            <a-sphere radius="2" 
                     color="#333"
                     roughness="0.8">
                <a-image src="#logo" scale="0.9 0.9 0.9" position="0 0 2"></a-image>
                <a-animation attribute="rotation"
                            dur="100000"
                            to="0 360 0"
                            repeat="indefinite"
                            easing="linear"></a-animation>
            </a-sphere>
            
            <!-- Anillos orbitales con caracterÃ­sticas -->
            <a-ring color="#4CAF50" 
                   radius-inner="2.5" 
                   radius-outer="2.7" 
                   rotation="45 0 0">
                <a-image src="#feature1" width="1.2" height="0.8" position="0 2.6 0"></a-image>
                <a-animation attribute="rotation"
                            dur="30000"
                            to="0 360 0"
                            repeat="indefinite"
                            easing="linear"></a-animation>
            </a-ring>
            
            <a-ring color="#4CAF50" 
                   radius-inner="3.5" 
                   radius-outer="3.7" 
                   rotation="-45 0 0">
                <a-image src="#feature2" width="1.2" height="0.8" position="0 3.6 0"></a-image>
                <a-animation attribute="rotation"
                            dur="40000"
                            to="0 -360 0"
                            repeat="indefinite"
                            easing="linear"></a-animation>
            </a-ring>
        </a-entity>

        <!-- Instrucciones como satÃ©lites -->
        <a-entity id="instructionSatellite" position="5 2 -8">
            <a-curvedimage src="#instrucciones" 
                          height="1.5" 
                          radius="0.8" 
                          theta-length="180" 
                          rotation="0 90 0">
                <a-animation attribute="rotation"
                            dur="30000"
                            to="0 450 0"
                            repeat="indefinite"
                            easing="linear"></a-animation>
            </a-curvedimage>
            <a-animation attribute="position"
                        dur="15000"
                        direction="alternate"
                        repeat="indefinite"
                        to="-5 2 -8"
                        easing="easeInOutSine"></a-animation>
        </a-entity>

        <!-- Nave de instalaciÃ³n -->
        <a-entity id="installShip" position="0 5 -5" geometry="primitive: cone; radiusBottom: 0.5; height: 1" 
                  material="color: #4CAF50; shader: flat" sound="on: click; src: #click-sound">
            <a-text value="INSTALAR" 
                   position="0 -1 0" 
                   align="center" 
                   color="white"
                   scale="1.5 1.5 1.5"
                   font="https://cdn.aframe.io/fonts/Exo2Bold.fnt"></a-text>
            <a-animation attribute="position"
                        dur="5000"
                        direction="alternate"
                        repeat="indefinite"
                        to="0 3 -5"
                        easing="easeInOutSine"></a-animation>
            <a-animation attribute="rotation"
                        dur="8000"
                        to="0 360 0"
                        repeat="indefinite"
                        easing="linear"></a-animation>
            <a-light type="point" color="#4CAF50" intensity="2" distance="5"></a-light>
        </a-entity>

        <!-- Portal de entrada -->
        <a-ring id="entryPortal" position="0 0 -20" color="#4CAF50" radius-inner="3" radius-outer="4" opacity="0.8">
            <a-animation attribute="rotation"
                        dur="15000"
                        to="0 0 360"
                        repeat="indefinite"
                        easing="linear"></a-animation>
            <a-animation attribute="scale"
                        dur="3000"
                        direction="alternate"
                        repeat="indefinite"
                        to="1.2 1.2 1.2"
                        easing="easeInOutSine"></a-animation>
        </a-ring>

        <!-- Efectos especiales -->
        <a-entity id="effects">
            <a-entity position="0 0 -5" particle-system="preset: default; color: #4CAF50; particleCount: 200; positionSpread: 0.5 0.5 0.5"></a-entity>
        </a-entity>

        <!-- Audio ambiental -->
        <a-sound src="https://cdn.aframe.io/360-image-gallery-boilerplate/audio/background.mp3" autoplay="true" loop="true"></a-sound>

        <a-camera>
            <a-cursor color="#4CAF50" scale="1.5 1.5 1.5" animation__click="property: scale; startEvents: click; from: 1.5 1.5 1.5; to: 1 1 1; dur: 150"></a-cursor>
        </a-camera>

        <!-- Luz ambiental -->
        <a-light type="ambient" color="#445"></a-light>
        <a-light type="directional" color="#fff" intensity="0.8" position="-0.5 1 1"></a-light>
    </a-scene>
    
    <div class="instructions" id="instructions-text">
        Explora nuestro universo digital. Acerca el cursor a la nave para instalar la app.
    </div>

    <script>
        // Detectar si es iOS
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        
        // Ocultar overlay de carga cuando la escena estÃ© lista
        document.querySelector('a-scene').addEventListener('loaded', function() {
            setTimeout(function() {
                document.getElementById('loading').style.opacity = '0';
                setTimeout(function() {
                    document.getElementById('loading').style.display = 'none';
                    
                    // Mostrar instrucciones especÃ­ficas para iOS
                    if (isIOS) {
                        document.getElementById('iosInstructions').style.display = 'block';
                        document.getElementById('instructions-text').innerHTML = 
                            'En iPhone, sigue las instrucciones en la parte superior para instalar la app.';
                    }
                    
                    // AnimaciÃ³n de tÃ­tulo
                    let title = document.getElementById('sceneTitle');
                    setTimeout(() => {
                        title.innerHTML = "Descubre un Mundo de Servicios Locales";
                        setTimeout(() => {
                            title.innerHTML = "Tu Directorio Profesional en Realidad Virtual";
                        }, 5000);
                    }, 3000);
                }, 1000);
            }, 1500);
        });
        
        // Manejar el evento de instalaciÃ³n con efectos especiales
        document.querySelector('#installShip').addEventListener('click', function() {
            if (isIOS) {
                // iOS no permite instalaciÃ³n automÃ¡tica
                document.getElementById('iosInstructions').style.display = 'block';
            } else {
                // Efectos especiales
                const ship = document.querySelector('#installShip');
                ship.setAttribute('animation', {
                    property: 'position',
                    to: '0 0 -30',
                    dur: 2000,
                    easing: 'easeInCubic'
                });
                
                // Crear explosiÃ³n de partÃ­culas
                const explosion = document.createElement('a-entity');
                explosion.setAttribute('position', '0 0 -5');
                explosion.setAttribute('particle-system', {
                    preset: 'explosion',
                    color: '#4CAF50',
                    particleCount: 500,
                    size: 0.5,
                    maxAge: 2
                });
                document.querySelector('#effects').appendChild(explosion);
                
                // Mensaje final
                setTimeout(() => {
                    document.getElementById('sceneTitle').innerHTML = "Â¡InstalaciÃ³n Completa!";
                    document.getElementById('instructions-text').innerHTML = 
                        "La app se ha instalado en tu dispositivo. Â¡Disfruta de DirectorioPro!";
                }, 2000);
            }
        });
        
        // Efecto de sonido al pasar sobre elementos
        document.querySelectorAll('[sound]').forEach(element => {
            element.addEventListener('mouseenter', () => {
                element.components.sound.playSound();
            });
        });
    </script>
</body>
</html>
